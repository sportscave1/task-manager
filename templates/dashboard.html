<script>
    document.addEventListener("DOMContentLoaded", function() {
        function fetchTasks() {
            fetch("/tasks")
                .then(response => response.json())
                .then(data => {
                    let taskList = document.getElementById("task-list");
                    taskList.innerHTML = ""; // Clear existing tasks
                    data.forEach(task => {
                        let taskItem = document.createElement("li");
                        taskItem.innerHTML = `
                            <strong>${task.task}</strong> - Due: ${task.due_date} - Priority: ${task.priority}
                            <button onclick="markComplete(${task.id}, ${task.completed})">
                                ${task.completed ? "Undo" : "Complete"}
                            </button>
                            <button onclick="removeTask(${task.id})">Remove</button>
                        `;
                        taskList.appendChild(taskItem);
                    });
                });
        }
    
        function markComplete(taskId, isCompleted) {
            fetch(`/complete/${taskId}`, { method: "POST" })
                .then(response => response.json())
                .then(() => fetchTasks());
        }
    
        function removeTask(taskId) {
            fetch(`/remove/${taskId}`, { method: "POST" })
                .then(response => response.json())
                .then(() => fetchTasks());
        }
    
        fetchTasks(); // Load tasks when page loads
    });
    </script>
    
    <ul id="task-list"></ul>
    